<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Proceed to Home</title>
        <link
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
            rel="stylesheet"
        />
        <link rel="stylesheet" href="/static/styles.css" />
        <link
            href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap"
            rel="stylesheet"
        />
        <style>
            /* Centering the button and token message */
            .center-container {
                display: flex;
                justify-content: center;
                align-items: center;
                flex-direction: column;
                height: 100vh;
                text-align: center;
            }

            .btn-proceed {
                padding: 10px 20px;
                font-size: 18px;
                background-color: #4caf50;
                color: white;
                border: none;
                border-radius: 5px;
                cursor: pointer;
            }

            .btn-proceed:hover {
                background-color: #45a049;
            }

            /* Styling for token message */
            .token-message {
                margin-top: 20px;
                font-size: 16px;
            }

            /* Styling for the eye icon and token visibility */
            .eye-icon {
                cursor: pointer;
                margin-left: 10px;
            }

            .token-value {
                display: inline;
                font-weight: bold;
                margin-top: 10px;
            }

            .hidden {
                display: none;
            }
        </style>
    </head>
    <body>
        <div class="center-container">
            <!-- Token message -->
            <div class="token-message" id="token-message">
                <span id="token-status"></span>
                <span id="token-value" class="hidden"></span>
                <i
                    class="fas fa-eye eye-icon"
                    id="toggle-eye"
                    class="hidden"
                ></i>
            </div>
            <br />
            <br />
            <!-- Welcome message with username -->
            <div class="welcome-message">
                <h2>Welcome, {{ user.username }}!</h2>
            </div>
            <br />
            <!-- Proceed button -->
            <button class="btn-proceed" id="proceed-button">
                Proceed to Home
            </button>
        </div>

        <script>
            // Assuming token info is passed as a query parameter or localStorage
            const token = localStorage.getItem("access_token"); // or fetch it from the server if needed

            const tokenMessage = document.getElementById("token-message");
            const tokenStatus = document.getElementById("token-status");
            const tokenValue = document.getElementById("token-value");
            const toggleEye = document.getElementById("toggle-eye");

            // Show token status
            if (token) {
                tokenStatus.textContent = "Token generated successfully!";
                tokenValue.textContent = token;
                toggleEye.classList.remove("hidden"); // Show the eye icon for toggling visibility
            } else {
                tokenStatus.textContent = "Token generation failed.";
            }

            // Toggle token visibility
            toggleEye.addEventListener("click", () => {
                if (tokenValue.classList.contains("hidden")) {
                    tokenValue.classList.remove("hidden");
                } else {
                    tokenValue.classList.add("hidden");
                }
            });

            // Redirect to anime page on button click
            document
                .getElementById("proceed-button")
                .addEventListener("click", function () {
                    window.location.href = "/anime.html"; // Redirect to anime page
                });
        </script>
    </body>
</html>
